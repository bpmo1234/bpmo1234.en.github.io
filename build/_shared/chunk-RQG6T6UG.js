import{a as y}from"/build/_shared/chunk-KOFAMGV2.js";import{a as d}from"/build/_shared/chunk-56WF7HCU.js";import{a as p,b as n}from"/build/_shared/chunk-GBMHDDOY.js";import{a as A}from"/build/_shared/chunk-QLU6BERC.js";import{f as L}from"/build/_shared/chunk-JEBMXGTI.js";var f=L(A());var w=L(A());var O=n?w.useLayoutEffect:w.useEffect;var W=L(A());function x(t,s){let i=y();(0,W.useEffect)(i?p:t,s)}function F(t,...s){t?.addEventListener?.(...s)}function B(t,...s){t?.removeEventListener?.(...s)}function k(t,s){return typeof t=="function"?t(s):t}var c=new Map,S=(t,s,i,o)=>{c.get(t)?.get(s)?.forEach(r=>{r!==o&&r(i)})},P=t=>{t.storageArea&&t.key&&t.newValue&&S(t.storageArea,t.key,t.newValue)},ot=(t,s,i)=>{n&&c.size===0&&F(window,"storage",P,{passive:!0});let o=c.get(t);o||(o=new Map,c.set(t,o));let r=o.get(s);r||(r=new Set,o.set(s,r)),r.add(i)},rt=(t,s,i)=>{let o=c.get(t);if(!o)return;let r=o.get(s);r&&(r.delete(i),r.size||o.delete(s),o.size||c.delete(t),n&&!c.size&&B(window,"storage",P))},at={defaultValue:null,initializeWithValue:!0};function T(t,s,i){let o=d({...at,...i}),r=(a,l)=>(o.current.parse??nt)(a,l),b=a=>(o.current.stringify??it)(a),u=d({fetchRaw:()=>t.getItem(s),fetch:()=>r(u.current.fetchRaw(),o.current.defaultValue),remove(){t.removeItem(s)},store(a){let l=b(a);return l!==null&&t.setItem(s,l),l}}),E=y(),[_,m]=(0,f.useState)(o.current?.initializeWithValue&&E?u.current.fetch():void 0),z=d(_),g=d({fetch(){m(u.current.fetch())},setRawVal(a){m(r(a,o.current.defaultValue))}});x(()=>{g.current.fetch()},[s]),(0,f.useEffect)(()=>{o.current.initializeWithValue||g.current.fetch()},[]),O(()=>{let a=g.current.setRawVal;return ot(t,s,a),()=>{rt(t,s,a)}},[t,s]);let h=d({set(a){if(!n)return;let l=k(a,z.current),V=u.current.store(l);V!==null&&S(t,s,V)},delete(){n&&(u.current.remove(),S(t,s,null))},fetch(){n&&S(t,s,u.current.fetchRaw())}}),v=(0,f.useMemo)(()=>({set:a=>{h.current.set(a)},remove(){h.current.delete()},fetch(){h.current.fetch()}}),[]);return(0,f.useMemo)(()=>({value:_,...v}),[_])}var it=t=>{if(t===null)return null;try{return JSON.stringify(t)}catch(s){return console.warn(s),null}},nt=(t,s)=>{if(t===null)return s;try{return JSON.parse(t)}catch(i){return console.warn(i),s}};var M;try{M=n&&Boolean(window.localStorage)}catch{M=!1}var e=M?(t,s)=>T(localStorage,t,s):(t,s)=>(n,{value:void 0,set:p,remove:p,fetch:p});function At(){let t=e("sora_settings-subtitle-font_color",{defaultValue:"White"}),s=e("sora_settings-subtitle-font_size",{defaultValue:"100%"}),i=e("sora_settings-subtitle-background_color",{defaultValue:"Black"}),o=e("sora_settings-subtitle-background_opacity",{defaultValue:"0%"}),r=e("sora_settings-subtitle-window_color",{defaultValue:"Black"}),b=e("sora_settings-subtitle-window_opacity",{defaultValue:"0%"}),u=e("sora_settings-subtitle-text_effect",{defaultValue:"Outline"}),E=e("sora_settings-subtitle-auto_show",{defaultValue:!1}),_=e("sora_settings-list-mute_trailer",{defaultValue:!0,initializeWithValue:!1}),m=e("sora_settings-list-play_trailer",{defaultValue:!1,initializeWithValue:!1}),z=e("sora_settings-list-fetch_logo",{defaultValue:!1}),g=e("sora_settings-list-show_spotlight",{defaultValue:!1}),h=e("sora_settings-player-auto_size",{defaultValue:!1}),v=e("sora_settings-player-pic_in_pic",{defaultValue:!0}),a=e("sora_settings-player-mute",{defaultValue:!1}),l=e("sora_settings-player-auto_play",{defaultValue:!1}),V=e("sora_settings-player-auto_mini",{defaultValue:!1}),I=e("sora_settings-player-loop",{defaultValue:!1}),R=e("sora_settings-player-screenshot",{defaultValue:!0}),N=e("sora_settings-player-mini_progress_bar",{defaultValue:!0}),C=e("sora_settings-player-auto_playback",{defaultValue:!0}),D=e("sora_settings-player-auto_play_next_episode",{defaultValue:!0}),H=e("sora_settings-player-show_skip_op_ed_button",{defaultValue:!0}),U=e("sora_settings-player-auto_skip_op_ed",{defaultValue:!1}),J=e("sora_settings-player-fast_forward",{defaultValue:!0}),j=e("sora_settings-layout-sidebar-style_mode",{defaultValue:"rounded-all"}),G=e("sora_settings-layout-sidebar-mini_mode",{defaultValue:!1,initializeWithValue:!1}),K=e("sora_settings-layout-sidebar-hover_mode",{defaultValue:!1,initializeWithValue:!1}),q=e("sora_settings-layout-sidebar-boxed_mode",{defaultValue:!1,initializeWithValue:!1}),Q=e("sora_settings-layout-sidebar-sheet_mode",{defaultValue:!1,initializeWithValue:!1}),X=e("sora_settings-layout-list_view",{defaultValue:"card",initializeWithValue:!1}),Y=e("sora_settings-layout-list-loading_type",{defaultValue:"pagination",initializeWithValue:!1}),Z=e("sora_settings-subtitle-auto_switch",{defaultValue:!0}),$=e("sora_settings-layout-header-show_breadcrumb",{defaultValue:!0,initializeWithValue:!1}),tt=e("sora_settings-layout-list-show-top-pagination",{defaultValue:!1,initializeWithValue:!1}),et=e("sora_settings-layout-theme-light_dark_only",{defaultValue:!0}),st=e("sora_settings-layout-theme-color",{defaultValue:"blue",initializeWithValue:!1});return{currentSubtitleFontColor:t,currentSubtitleFontSize:s,currentSubtitleBackgroundColor:i,currentSubtitleBackgroundOpacity:o,currentSubtitleWindowColor:r,currentSubtitleWindowOpacity:b,autoShowSubtitle:E,isMutedTrailer:_,isPlayTrailer:m,isAutoSize:h,isPicInPic:v,isMuted:a,isAutoPlay:l,isAutoMini:V,isLoop:I,isScreenshot:R,isMiniProgressBar:N,isAutoPlayback:C,isAutoPlayNextEpisode:D,isShowSkipOpEdButton:H,isAutoSkipOpEd:U,isFastForward:J,currentSubtitleTextEffects:u,sidebarStyleMode:j,sidebarMiniMode:G,sidebarHoverMode:K,sidebarBoxedMode:q,sidebarSheetMode:Q,listViewType:X,listLoadingType:Y,autoSwitchSubtitle:Z,isShowBreadcrumb:$,isShowTopPagination:tt,isLightDarkThemeOnly:et,currentThemeColor:st,isFetchLogo:z,isShowSpotlight:g}}export{e as a,At as b};
