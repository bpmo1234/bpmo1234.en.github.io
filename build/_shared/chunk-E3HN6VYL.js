import{a as b}from"/build/_shared/chunk-QLU6BERC.js";import{f as v}from"/build/_shared/chunk-JEBMXGTI.js";var e=v(b(),1);var l=v(b(),1),h=Boolean(globalThis?.document)?l.useLayoutEffect:l.useEffect;function O(L={}){let{loading:t,src:r,srcSet:s,onLoad:a,onError:u,crossOrigin:f,sizes:c,ignoreFallback:d}=L,[g,m]=(0,e.useState)("pending");(0,e.useEffect)(()=>{m(r?"loading":"pending")},[r]);let n=(0,e.useRef)(),p=(0,e.useCallback)(()=>{if(!r)return;i();let o=new Image;o.src=r,f&&(o.crossOrigin=f),s&&(o.srcset=s),c&&(o.sizes=c),t&&(o.loading=t),o.onload=E=>{i(),m("loaded"),a?.(E)},o.onerror=E=>{i(),m("failed"),u?.(E)},n.current=o},[r,f,s,c,a,u,t]),i=()=>{n.current&&(n.current.onload=null,n.current.onerror=null,n.current=null)};return h(()=>{if(!d)return g==="loading"&&p(),()=>{i()}},[g,p,d]),d?"loaded":g}export{O as a};
