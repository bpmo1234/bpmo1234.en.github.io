import{a as R}from"/build/_shared/chunk-EGZT67G7.js";import{a as V}from"/build/_shared/chunk-U3HIYESC.js";import{a as _}from"/build/_shared/chunk-KFQLBWY7.js";import{c as j,d as D,e as L,f as M,g as O}from"/build/_shared/chunk-5MV7UISD.js";import{a as F}from"/build/_shared/chunk-NO7IKHGB.js";import{a as u}from"/build/_shared/chunk-65A6DYIU.js";import{a as k}from"/build/_shared/chunk-TWHYYFCA.js";import{b as A}from"/build/_shared/chunk-RQG6T6UG.js";import{a as z}from"/build/_shared/chunk-FL5UVREB.js";import{a as y}from"/build/_shared/chunk-AO66PQB5.js";import{a as G,d as W}from"/build/_shared/chunk-B5P4CYPT.js";import{b as ie,c as g}from"/build/_shared/chunk-TQANA533.js";import{a as h}from"/build/_shared/chunk-NXMX6MFX.js";import{a as B,b as f}from"/build/_shared/chunk-CQDTB6KU.js";import{d as $}from"/build/_shared/chunk-OT3RM5IB.js";import{a as te,b as T}from"/build/_shared/chunk-QLU6BERC.js";import{f as c}from"/build/_shared/chunk-JEBMXGTI.js";var r=c(te());var w=c(ie());var se=[{activeType:0,activeTypeName:"Number"},{activeType:1,activeTypeName:"Image"}],Z=se;var t=c(T()),oe=H=>{let{type:o,id:x,episodes:n,season:Q,providers:s}=H,b=$(),{isShowSkipOpEdButton:U}=A(),a=(0,r.useMemo)(()=>n&&n.length,[n]),l=z("(max-width: 650px)",{initializeWithValue:!1}),[m,q]=(0,r.useState)(s[0]?.provider),[C,J]=(0,r.useState)(s[0]?.episodesCount||0),[K,S]=(0,r.useState)(a&&a>=(s[0]?.episodesCount||0)?n?.slice(0,s[0]?.episodesCount||0):Array(s[0]?.episodesCount||0).fill(null).map((e,i)=>i)),[p,I]=(0,r.useState)(0),{gotoPage:X,currentPage:N,maxPage:P,currentData:v}=R(K||[],50),Y=async e=>{q(e);let i=s.find(d=>d.provider===e);i&&(J(i.episodesCount||0),a&&a>=(i?.episodesCount||0)?S(n?.slice(0,i?.episodesCount||0)):(I(0),S(Array(i?.episodesCount||0).fill(null).map((d,ee)=>ee))))},E=e=>{let i=s.find(d=>d.provider===m);o==="tv"?b(`/tv-shows/${x}/season/${Q}/episode/${e+1}/watch?provider=${m}&id=${i?.id}`):o==="anime"&&b(`/anime/${x}/episode/${e+1}/watch?provider=${m}&id=${i?.id}&skipOpEd=${U.value}`)};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"my-5 flex w-full flex-row flex-wrap items-center justify-between gap-4",children:[(0,t.jsx)("h3",{children:"Episodes"}),(0,t.jsxs)("div",{className:"flex flex-row items-center justify-end gap-2",children:[s?(0,t.jsxs)(j,{value:m,onValueChange:e=>Y(e),children:[(0,t.jsx)(L,{"aria-label":"provider",children:(0,t.jsx)(D,{})}),(0,t.jsx)(M,{children:s.map(e=>(0,t.jsx)(O,{value:e.provider,children:e.provider},e.provider))})]}):null,a&&a>=C?(0,t.jsx)(B,{children:Z.map(e=>(0,t.jsx)(f,{type:"button",onPress:()=>I(e.activeType),...p===e.activeType?{}:{variant:"ghost"},isIconOnly:!0,children:e.activeTypeName==="Image"?(0,t.jsx)(u,{}):(0,t.jsx)(V,{width:36,height:36})},`button-item-${e.activeType}`))}):null]})]}),v&&v.length>0&&(0,t.jsx)("div",{className:`flex w-full ${p===0?"flex-row flex-wrap items-center justify-start":"flex-col"}`,children:v.map((e,i)=>p===0?(0,t.jsx)(f,{type:"button",onPress:()=>E(i),className:"mb-2 mr-2 w-10 p-0",isIconOnly:!0,children:i+1+(N-1)*50},e.id):p===1&&a&&a>=C?(0,t.jsxs)("div",{children:[(0,t.jsx)(W,{isHoverable:!0,isPressable:!0,className:"!max-h-[127px] w-full hover:ring-2 hover:ring-primary",onClick:()=>E(i),children:(0,t.jsxs)(G,{className:"flex flex-row flex-nowrap justify-start p-0",children:[o==="tv"&&(e?.still_path?(0,t.jsx)(g,{src:k.posterUrl(e?.still_path,"w342"),width:227,height:"100%",isZoomed:!0,radius:"xl",loading:"lazy",disableSkeleton:!1,alt:e?.name||"",title:e?.name||"",classNames:{wrapper:"m-0 min-w-[227px] max-h-[125px] overflow-hidden"},placeholder:"empty",options:{contentType:w.MimeType.WEBP},responsive:[{size:{width:227,height:127}}]}):(0,t.jsx)(y,{icon:(0,t.jsx)(u,{width:48,height:48}),radius:"xl",classNames:{base:"z-0 aspect-[16/9] min-w-[227px] min-h-[125px] overflow-hidden"}})),o==="anime"&&(e?.image?(0,t.jsx)(g,{src:e.image,width:227,height:"100%",alt:e?.title||"",title:e?.title||"",loading:"lazy",radius:"xl",isZoomed:!0,disableSkeleton:!1,classNames:{wrapper:"m-0 min-w-[227px] max-h-[125px] overflow-hidden"},placeholder:"empty",options:{contentType:w.MimeType.WEBP},responsive:[{size:{width:227,height:127}}]}):(0,t.jsx)(y,{icon:(0,t.jsx)(u,{width:48,height:48}),radius:"xl",classNames:{base:"z-0 aspect-[16/9] min-w-[227px] min-h-[125px] overflow-hidden"}})),(0,t.jsxs)("div",{className:"flex flex-col justify-start gap-y-1 p-4",children:[(0,t.jsxs)("h5",{className:"line-clamp-1",children:["Episode"," ",o==="tv"?l?`${e?.episode_number}`:`${e?.episode_number}: ${e?.name}`:null,o==="anime"?l?`${e?.number}`:`${e?.number}: ${e?.title}`:null]}),o==="tv"&&!l&&(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"flex items-center gap-x-4",children:[(0,t.jsx)(F,{rating:e?.vote_average.toFixed(1),ratingType:"tv"}),(0,t.jsxs)("h5",{children:[e.air_date," | ",e?.runtime," min"]})]}),(0,t.jsx)("h6",{className:"!line-clamp-1",children:e.overview})]}),o==="anime"&&!l&&e.description&&(0,t.jsx)("h6",{className:"!line-clamp-2",children:e.description})]})]})}),(0,t.jsx)(h,{y:5})]},e.id):null)}),(0,t.jsx)(h,{y:6}),P>1?(0,t.jsx)("div",{className:"flex flex-row justify-center",children:(0,t.jsx)(_,{total:P,initialPage:N,onChange:e=>X(e),...l&&{size:"xs"}})}):null]})},Ce=oe;export{Ce as a};
