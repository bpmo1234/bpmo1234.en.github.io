import{a as B}from"/build/_shared/chunk-QFLXK2QK.js";import{a as w,b as k,c as A,d as S,e as K,f as b}from"/build/_shared/chunk-55NVTXCL.js";import{a as O}from"/build/_shared/chunk-AN4HOKES.js";import"/build/_shared/chunk-2U5IOMZT.js";import"/build/_shared/chunk-RCF6322T.js";import"/build/_shared/chunk-HASDG25T.js";import"/build/_shared/chunk-VQ5EC5B2.js";import{b as D}from"/build/_shared/chunk-3OEQ7K3T.js";import{a as T}from"/build/_shared/chunk-NXMX6MFX.js";import"/build/_shared/chunk-OZSVYI4Q.js";import"/build/_shared/chunk-J3ZU6SDT.js";import"/build/_shared/chunk-ADMPE4EY.js";import"/build/_shared/chunk-HXGDBLUY.js";import"/build/_shared/chunk-UWVAGYA2.js";import"/build/_shared/chunk-4LJTPU4C.js";import{b as l}from"/build/_shared/chunk-CQDTB6KU.js";import"/build/_shared/chunk-GYMQZE7X.js";import"/build/_shared/chunk-CKU4S6GJ.js";import"/build/_shared/chunk-VRDZAOTH.js";import"/build/_shared/chunk-WQT5KMCO.js";import"/build/_shared/chunk-HEMBAUA6.js";import{a as x}from"/build/_shared/chunk-DGVX6BYT.js";import{b as v}from"/build/_shared/chunk-NYVQ56JW.js";import"/build/_shared/chunk-TLKZEMLJ.js";import"/build/_shared/chunk-UE6UC7GV.js";import{b as u,d as p,l as g,t as f,x as y}from"/build/_shared/chunk-OT3RM5IB.js";import{a as M,b as C}from"/build/_shared/chunk-QLU6BERC.js";import{f as c}from"/build/_shared/chunk-JEBMXGTI.js";var i=c(M());var F=c(O());var e=c(C());var R=x(()=>[{title:"Cache Admin"},{name:"description",content:"Cache Admin"}]),E={breadcrumb:()=>(0,e.jsx)(v,{to:"/cache/admin",children:"Cache Admin"},"cache-admin"),miniTitle:()=>({title:"Cache Management",showImage:!1})},U=({cacheKey:a,handleOpenDetailCache:m})=>{let o=y(),[r,s]=(0,i.useState)(!1);return(0,e.jsxs)("div",{className:"flex items-center gap-2 font-mono",children:[(0,e.jsxs)(o.Form,{method:"post",children:[(0,e.jsx)("input",{type:"hidden",name:"cacheKey",value:a}),(0,e.jsx)(l,{variant:"ghost",color:"danger",onBlur:()=>s(!1),onPress:h=>{let d=h.target;r?o.submit(d?.form):s(!0)},children:o.state==="idle"?r?"You sure?":"Delete":"Deleting..."})]}),(0,e.jsx)(l,{variant:"light",color:"primary",onPress:()=>m(a),children:a})]})},j=()=>{let{cacheKeys:a}=f(),[m,o]=(0,i.useState)(!1),[r,s]=(0,i.useState)(null),[h]=g(),d=u(),H=p(),L=h.get("query")??"",n=(0,i.useMemo)(()=>r?a.find(t=>t.key===r):null,[r,a]),N=t=>{s(t),o(!0)},P=()=>{o(!1)},I=t=>{H(`/cache/admin?query=${t}`)};return(0,e.jsx)(D.div,{initial:{x:"-10%",opacity:0},animate:{x:0,opacity:1},exit:{x:"-10%",opacity:0},transition:{duration:.3},children:(0,e.jsxs)("div",{className:"flex w-full max-w-screen-4xl flex-col justify-start px-3 sm:px-0",children:[(0,e.jsx)("h2",{children:"Cache Admin"}),(0,e.jsx)(B,{onSubmit:I,textOnButton:"Search",textPlaceHolder:"Search cache key",defaultValue:L}),(0,e.jsx)(T,{x:5}),(0,e.jsxs)(w,{open:m,onOpenChange:o,children:[(0,e.jsx)("div",{className:"flex flex-col gap-4",children:a.map(t=>(0,e.jsx)(k,{children:(0,e.jsx)(U,{cacheKey:t.key,handleOpenDetailCache:q=>N(q)})},t.key))}),(0,e.jsxs)(A,{children:[(0,e.jsx)(S,{children:(0,e.jsx)(b,{id:"modal-title",children:"Cache detail"})}),n?(0,e.jsxs)("div",{className:"flex flex-col gap-4",id:"modal-description",children:[(0,e.jsxs)("h5",{children:["Cache Key: ",(0,e.jsx)("span",{children:n.key})]}),(0,e.jsxs)("h5",{children:["Cache TTL: ",(0,e.jsx)("span",{children:n.data.metadata.ttl})]}),(0,e.jsxs)("h5",{children:["Cache Stale While Revalidate: ",(0,e.jsx)("span",{children:n.data.metadata.swr})]}),(0,e.jsxs)("h5",{children:["Cache Created At: ",(0,e.jsx)("span",{children:n.data.metadata.createdTime})]}),(0,e.jsxs)("h5",{children:["Cache Data: ",(0,e.jsx)("span",{children:JSON.stringify(n.data.value)})]})]}):null,(0,e.jsx)(K,{children:(0,e.jsx)(l,{variant:"flat",color:"danger",onPress:P,children:"Close"})})]})]})]})},d.key)},J=j;export{J as default,E as handle,R as meta};
