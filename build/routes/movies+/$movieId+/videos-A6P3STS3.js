import{a as z,b as B,c as M,d as A}from"/build/_shared/chunk-ESZN27YP.js";import{a as J}from"/build/_shared/chunk-6TVKIBKR.js";import{b as $}from"/build/_shared/chunk-R4UGCNGU.js";import{a as C,b as N,c as D}from"/build/_shared/chunk-55NVTXCL.js";import{a as Q}from"/build/_shared/chunk-AN4HOKES.js";import"/build/_shared/chunk-6XH6CZM3.js";import"/build/_shared/chunk-UUFKR7CL.js";import"/build/_shared/chunk-ODDNHQYY.js";import{a as q}from"/build/_shared/chunk-RA2CXU7U.js";import"/build/_shared/chunk-CEP3TN4Z.js";import"/build/_shared/chunk-HASDG25T.js";import"/build/_shared/chunk-VQ5EC5B2.js";import{b as g,c as x}from"/build/_shared/chunk-3OEQ7K3T.js";import"/build/_shared/chunk-Q4FXHGWO.js";import{a as b}from"/build/_shared/chunk-TWHYYFCA.js";import"/build/_shared/chunk-KOFAMGV2.js";import{a as I}from"/build/_shared/chunk-FL5UVREB.js";import"/build/_shared/chunk-56WF7HCU.js";import"/build/_shared/chunk-GBMHDDOY.js";import"/build/_shared/chunk-KITECXBJ.js";import{a as E,b as L,d as P}from"/build/_shared/chunk-B5P4CYPT.js";import{b as G,c as k}from"/build/_shared/chunk-TQANA533.js";import"/build/_shared/chunk-E3HN6VYL.js";import"/build/_shared/chunk-OZSVYI4Q.js";import"/build/_shared/chunk-J3ZU6SDT.js";import"/build/_shared/chunk-ADMPE4EY.js";import"/build/_shared/chunk-HXGDBLUY.js";import"/build/_shared/chunk-UWVAGYA2.js";import"/build/_shared/chunk-4LJTPU4C.js";import"/build/_shared/chunk-CKU4S6GJ.js";import"/build/_shared/chunk-WQT5KMCO.js";import"/build/_shared/chunk-HEMBAUA6.js";import{a as V}from"/build/_shared/chunk-DGVX6BYT.js";import{b as w}from"/build/_shared/chunk-NYVQ56JW.js";import"/build/_shared/chunk-TLKZEMLJ.js";import"/build/_shared/chunk-UE6UC7GV.js";import{t as h,x as y}from"/build/_shared/chunk-OT3RM5IB.js";import{a as U,b as T}from"/build/_shared/chunk-QLU6BERC.js";import{f as p}from"/build/_shared/chunk-JEBMXGTI.js";var r=p(U());var K=p(Q());var S=p(q()),F=p(G());var X=p(J());var e=p(T());var Y=V(({params:i,matches:d})=>{let f=d.find(u=>u.id==="routes/movies+/$movieId")?.data;if(!f)return[{title:"Missing Movie"},{name:"description",content:`There is no movie with the ID: ${i.movieId}`}];let{detail:o}=f,{title:n}=o||{},c=n||"";return[{title:`Sora - ${c} - Videos`},{property:"og:url",content:`https://sorachill.vercel.app/movies/${i.movieId}/videos`},{property:"og:title",content:`Sora - ${c} - Videos`},{name:"twitter:title",content:`Sora - ${c} - Videos`}]}),Z={breadcrumb:({match:i})=>(0,e.jsx)(w,{to:`/movies/${i.params.movieId}/videos`,children:"Videos"},`movies-${i.params.movieId}-videos`),miniTitle:({parentMatch:i})=>({title:i?.data?.detail?.title,subtitle:"Videos",showImage:i?.data?.detail?.poster_path!==void 0,imageUrl:b?.posterUrl(i?.data?.detail?.poster_path||"","w92")})},ee=()=>{let{videos:i}=h(),d=y(),f=I("(max-width: 650px)",{initializeWithValue:!1}),[o,n]=(0,r.useState)("trailer"),[c,u]=(0,r.useState)([]),[H,_]=(0,r.useState)(!1),[j,O]=(0,r.useState)({}),R=(0,r.useRef)(null),l=[{id:"trailer",activeVideo:"Trailer"},{id:"teaser",activeVideo:"Teaser"},{id:"clip",activeVideo:"Clip"},{id:"behind_the_scenes",activeVideo:"Behind the Scenes"},{id:"bloopers",activeVideo:"Bloopers"},{id:"featurette",activeVideo:"Featurette"}];(0,r.useEffect)(()=>{if(i){let t=[],s=l.find(a=>a.id===o);t=i.results?.filter(a=>a.type===s?.activeVideo);let m=t.map(a=>a.key).join(",");m?d.load(`/api/youtube-video?id=${m}`):u([])}},[o,i]),(0,r.useEffect)(()=>{d.data&&d.data.youtubeVideo&&u(d.data.youtubeVideo)},[d.data]);let W=(t,s)=>{let m=l.find(a=>a.id===o);if(s.offset?.x>100)if(m?.id==="trailer")n("featurette");else{let a=l.findIndex(v=>v.id===o);n(l[a-1].id)}if(s.offset?.x<-100&&s.offset?.y>-50)if(m?.id==="featurette")n("trailer");else{let a=l.findIndex(v=>v.id===o);n(l[a+1].id)}};return(0,e.jsx)("div",{className:"mt-3 flex w-full max-w-[1920px] flex-col gap-x-0 gap-y-4 px-3 sm:flex-row sm:items-stretch sm:justify-center sm:gap-x-4 sm:gap-y-0 sm:px-3.5 xl:px-4 2xl:px-5",children:(0,e.jsxs)(z,{defaultValue:o,value:o,orientation:f?"horizontal":"vertical",onValueChange:t=>n(t),className:"w-full",children:[(0,e.jsx)(B,{children:l.map(t=>(0,e.jsxs)(M,{value:t.id,className:"relative",children:[(0,e.jsx)("h6",{className:"!m-0",children:t.activeVideo}),o===t.id?(0,e.jsx)(g.div,{className:"absolute overflow-hidden rounded-md bg-default-foreground data-[orientation=horizontal]:bottom-0 data-[orientation=vertical]:left-0 data-[orientation=horizontal]:h-1 data-[orientation=vertical]:h-1/2 data-[orientation=horizontal]:w-1/2 data-[orientation=vertical]:w-1",layoutId:"video-underline","data-orientation":f?"horizontal":"vertical",ref:R}):null]},t.id))}),(0,e.jsxs)(C,{open:H,onOpenChange:_,children:[(0,e.jsx)(x,{mode:"wait",children:(0,e.jsx)(A,{value:o,children:(0,e.jsx)(g.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{ease:"easeInOut",duration:.3},drag:S.isMobile?"x":!1,dragConstraints:{left:0,right:0},dragElastic:.4,onDragEnd:W,dragDirectionLock:!0,children:(0,e.jsx)("div",{className:"grid w-full grid-cols-1 justify-items-center gap-4 lg:grid-cols-2 3xl:grid-cols-3 4xl:grid-cols-4",children:c?c.map(t=>(0,e.jsx)(N,{asChild:!0,children:(0,e.jsxs)(P,{isPressable:!0,isHoverable:!0,role:"figure",className:"w-[320px] hover:ring-2 hover:ring-primary",onPress:()=>{let s=i?.results?.find(m=>m.key===t.id);s&&O(s)},children:[(0,e.jsx)(E,{className:"shrink-0 grow-0 overflow-hidden p-0",children:(0,e.jsx)(k,{src:t?.snippet?.thumbnails?.medium?.url,width:320,height:180,alt:t?.snippet?.title,loading:"lazy",title:t?.snippet?.title,placeholder:"empty",options:{contentType:F.MimeType.WEBP},responsive:[{size:{width:320,height:180}}]})}),(0,e.jsxs)(L,{className:"flex flex-col items-start justify-start",children:[(0,e.jsx)("h6",{className:"!m-0 text-left font-semibold",children:t?.snippet?.title}),(0,e.jsx)("p",{className:"opacity-70",children:t?.snippet?.channelTitle})]})]})},t?.id)):null})})})}),(0,e.jsx)(D,{className:"overflow-hidden !p-0",children:(0,e.jsx)($,{trailer:j})})]})]})})},te=ee;export{te as default,Z as handle,Y as meta};
